generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ============================================
// UTILISATEURS ADMIN
// ============================================
model User {
  id        String   @id @default(cuid())
  email     String   @unique
  password  String
  name      String?
  role      String   @default("admin")
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// ============================================
// SOUMISSIONS DE FORMULAIRES
// ============================================
model ContactSubmission {
  id           String   @id @default(cuid())
  firstName    String
  lastName     String
  email        String
  phone        String?
  organization String?
  subject      String
  message      String
  status       String   @default("new") // new, in_progress, completed
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

model InscriptionSubmission {
  id         String   @id @default(cuid())
  firstName  String
  lastName   String
  email      String
  phone      String?
  country    String?
  program    String
  profile    String?
  motivation String?
  status     String   @default("new") // new, in_progress, completed
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
}

model FranchiseSubmission {
  id           String   @id @default(cuid())
  firstName    String
  lastName     String
  email        String
  phone        String?
  country      String
  city         String
  organization String?
  motivation   String?
  project      String?
  status       String   @default("new") // new, in_progress, completed
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}

// ============================================
// PARAMÈTRES DU SITE
// ============================================
model SiteSettings {
  id             String @id @default("main")
  // Couleurs du thème
  primaryColor   String @default("#0A2A43")
  secondaryColor String @default("#153D63")
  accentColor    String @default("#C9A44A")
  textColor      String @default("#4A4A4A")
  bgColor        String @default("#F5F6F7")
  // Informations de contact
  contactEmail   String @default("info@ethsun-oxford.uk")
  contactPhone   String @default("+44 74 2420 1585")
  address        String @default("Oxford, United Kingdom")
  adminEmail     String @default("admin@ethsun-oxford.uk")
  // Réseaux sociaux
  facebookUrl    String @default("")
  twitterUrl     String @default("")
  linkedinUrl    String @default("")
  instagramUrl   String @default("")
  whatsappNumber String @default("")
  updatedAt      DateTime @updatedAt
}

// ============================================
// STATISTIQUES PAGE D'ACCUEIL
// ============================================
model Stat {
  id        String   @id @default(cuid())
  value     String
  labelFr   String
  labelEn   String
  labelEs   String
  sortOrder Int      @default(0)
  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// ============================================
// TÉMOIGNAGES
// ============================================
model Testimonial {
  id        String   @id @default(cuid())
  textFr    String
  textEn    String?
  textEs    String?
  author    String
  role      String?
  rating    Int      @default(5)
  isActive  Boolean  @default(true)
  sortOrder Int      @default(0)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// ============================================
// CATÉGORIES DE CERTIFICATION
// ============================================
model CertificationCategory {
  id             String          @id @default(cuid())
  slug           String          @unique
  nameFr         String
  nameEn         String?
  nameEs         String?
  sortOrder      Int             @default(0)
  isActive       Boolean         @default(true)
  certifications Certification[]
  createdAt      DateTime        @default(now())
  updatedAt      DateTime        @updatedAt
}

// ============================================
// CERTIFICATIONS / FORMATIONS
// ============================================
model Certification {
  id            String                 @id @default(cuid())
  slug          String                 @unique
  categoryId    String?
  category      CertificationCategory? @relation(fields: [categoryId], references: [id])
  // Titres multilingues
  titleFr       String
  titleEn       String?
  titleEs       String?
  // Infos générales
  duration      String
  level         String
  price         String
  startDate     String?
  // Descriptions multilingues
  descriptionFr String
  descriptionEn String?
  descriptionEs String?
  // Objectifs (JSON arrays)
  objectifsFr   String                 @default("[]")
  objectifsEn   String?
  objectifsEs   String?
  // Débouchés (JSON arrays)
  debouchesFr   String                 @default("[]")
  debouchesEn   String?
  debouchesEs   String?
  // État
  isActive      Boolean                @default(true)
  sortOrder     Int                    @default(0)
  // Relations
  modules       CertificationModule[]
  createdAt     DateTime               @default(now())
  updatedAt     DateTime               @updatedAt
}

// ============================================
// MODULES DE CERTIFICATION
// ============================================
model CertificationModule {
  id              String        @id @default(cuid())
  certificationId String
  certification   Certification @relation(fields: [certificationId], references: [id], onDelete: Cascade)
  // Titres multilingues
  titleFr         String
  titleEn         String?
  titleEs         String?
  // Descriptions multilingues
  descriptionFr   String
  descriptionEn   String?
  descriptionEs   String?
  sortOrder       Int           @default(0)
  createdAt       DateTime      @default(now())
  updatedAt       DateTime      @updatedAt
}

